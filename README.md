# 重度肢体不自由児・者のためのiOS版導入用VOCAアプリの継続開発

令和5年度　卒業研究論文


重度肢体不自由児・者のための
iOS版導入用VOCAアプリの継続開発


総合工学科 情報システムコース 5年
1901126　GANBAT BAT-ORGIL
指導教員 総合工学科 竹島 久志


仙台高等専門学校

第１章　はじめに
　本研究では，重度肢体不自由者を対象とした導入用VOCAアプリのiOS版の開発を引き継ぎ，行う．本章では，その研究背景と目的について述べる．

1.1　導入用VOCAについて
　本研究室では，重度肢体不自由児・者のコミュニケーション支援に関するシステムの研究を行っている．
　重度肢体不自由児とは，脊髄性筋萎縮症（Spinal Muscular Atrophy; SMA）I型など，生後間もなく運動機能を喪失した子供のことであり，呼吸機能にも障害が生じることから気管切開を行うため，発話能力をも喪失してしまう．これにより，健常児に比べ言語学習が難しくなるため，より早期にコミュニケーション手段を獲得し，言語発達の遅れをできるだけ阻止する必要がある．そこで本研究室では，このような重度肢体不自由児向けに，文字学習前のコミュニケーション獲得を目的として少数定型句VOCA（Voice Output Communication Aid）を開発した（図１）．この少数定型句VOCAはオートスキャン（走査）で動作し，選択した定型句を読み上げる．Webブラウザ上で動作するものとなっている．
　また，この少数定型句VOCAのシステムを重度肢体不自由者に応用できるのではということで，導入用VOCAアプリ（Android版）が開発された[1]．重度肢体不自由者とは，筋萎縮性側索硬化症（Amyotrophic Lateral Sclerosis; ALS）など，後天的に運動機能を喪失した大人のことである．重度肢体不自由者は重度肢体不自由児と違い，言語学習は終えているため学習支援の必要はないものの，次第に筋力を失っていく中で適切に機器導入を行う必要がある．Android版導入用VOCAアプリ（図２）は，そうした課題の解決のため開発された．このアプリでは，定型句はもちろん，50音から一文字ずつ選択することもでき，少数定型句VOCAに比べ文章の自由度が高い．さらに，定型句のカスタマイズやオフライン下での使用も可能となっている．また，このアプリは重度肢体不自由者の導入用としてだけでなく，重度肢体不自由児のコミュニケーション獲得にも利用可能である．こうして開発されたAndroid版導入用VOCAアプリの試用を，ALS患者を対象に実施し，意思疎通支援やニーズなど情報の獲得という点で有用であると確認された[2]．また専門職による試用も行い，初めての意思伝達手段や導入用としての有用性は確認されたが，同時に一部機能の使いづらさやわかりにくさなどといった課題も浮上した[3]．
　これらの課題を踏まえた上で，iPadを持っているユーザーからの要望もあったことから，iOS版導入用VOCAアプリの開発が2021年度段階で行われたが，完成には至っていない[4]．

 
図1．Web版少数定型句VOCA

 
図2．Android版導入用VOCAアプリ
1.2　課題
　まず，昨年度段階で開発されたiOS版導入用VOCAアプリの機能について述べる． 
・定型句VOCA画面
・50音文字盤VOCA画面
・カストマイズ画面

　　未だ実装されていない機能について述べる．
・パネルカスタマイズ機能
・定型句追加機能（録音・合成音声）
・定型句パネルの複数化
・スキャン音・範囲機能
・ログ機能・カレンダー

 
図３．昨年度段階で開発されたiOS版導入用VOCAアプリの画面

1.3　研究目的
iOS版はAndroid版に比べて未完成な部分が多いため、より自由度が高く使いやすいアプリを開発することを目指した。このような開発状況から、今年度は未実装の機能を開発し、iOS版導入用のVOCAアプリを完成させることを研究の目的とする．

第2章　カスタマイズ機能等の開発
2.1　開発環境
　本研究の開発環境は以下の通りである.
・PC：MacBook Pro (13-inch，M2，2022)
・開発OS：macOS
・開発環境：Xcode
・使用言語：Swift
・使用フレームワーク：SwiftUI
・テストOS: iOS・iPadOS・macOS

2.2　既存機能
　昨年度段階で開発された機能について説明する．

2.2.1　定型句VOCA画面
　本画面では，(7)の定型句ボタンを用いることによって定型句コミュニケーションが可能となっている．オートスキャンで選択可能となっているのは(6)〜(14)（(12)はボタンでないため除く）であり，(1)〜(4)はタッチ操作のみに対応している．

 
図４．iOS版導入用VOCA定型句画面




表1．定型句VOCA画面の各オブジェクトの仕様一覧
No.	名称	機能
(1)	スキャン音替えボタン	音声→効果音→無音→音声→…の順に読み上げ方法を変更する（未実装）
(2)	設定ボタン	カストマイズ画面へ遷移する
(3)	スキャン範囲切り替えボタン	機能あり(速度などの機能ボタンを含める)⇔定型句のみ でスキャン範囲を変更する（未実装）
(4)	スキャンボタン	オートスキャンが開始される．直接タップする他に，returnキー，スペースキー，1キー，3キーでも反応する
(5)	フィールド	選択された定型句が出力される．50音文字盤VOCA画面に遷移しても，書き込まれた内容は保持される
(6)	読み上げボタン	フィールドに出力された文字列を全て読み上げる
(7)	定型句ボタン	選択されると，読み上げられた後，フィールドに出力される
(8)	消去ボタン	フィールドに出力された文字列を全て消去する
(9)	画面切り替えボタン（50音文字盤VOCA画面）	50音文字盤VOCA画面へ遷移する
(10)	速度変更ボタン（加速）	オートスキャンの速度を0.2〜2.0秒の間で変更できる
(11)	速度変更ボタン（減速）	オートスキャンの速度を0.2〜2.0秒の間で変更できる
(12)	速度フィールド	現在のスキャン速度が表示される
(13)	音量変更ボタン（-）	アプリの音量を0〜1.0の間で変更できる
(14)	音量変更ボタン（+）	アプリの音量を0〜1.0の間で変更できる
(15)	音量フィールド	現在のアプリの音量が表示される









2.2.2　50音文字盤VOCA画面
　本画面では，50音文字ボタンを用いることで，一文字ずつからのコミュニケーションが可能となっている．本画面は清音ひらがな文字盤，（半）濁音ひらがな文字盤，清音カタカナ文字盤，（半）濁音カタカナ文字盤の4画面で構成されている．オートスキャンで選択可能となっているのは(6)〜(16)（(14)はボタンでないため除く）であり，(1)〜(4)はタッチ操作のみに対応している．

 
図５．50音文字盤VOCA画面（清音ひらがな文字盤）

 
表2．50音文字盤VOCA画面の各オブジェクトの仕様
No.	名称	機能
(1)	読み上げ切り替えボタン	音声→効果音→無音→音声→…の順に読み上げ方法を変更する（未実装）
(2)	設定ボタン	設定画面へ遷移する
(3)	スキャン範囲切り替えボタン	機能あり(速度などの機能ボタンを含める)⇔機能なし 
でスキャン範囲を変更する（未実装）
(4)	スキャンボタン	オートスキャンが開始される．直接タップする他に，returnキー，スペースキー，1キー，3キーでも反応する
(5)	フィールド	選択された定型句が出力される．50音文字盤VOCA画面に遷移しても，書き込まれた内容は保持される
(6)	画面切り替えボタン（定型句VOCA画面）	定型句VOCA画面へ遷移する
(7)	文字盤切り替えボタン（かな）	清音ひらがな→(半)濁音ひらがな→清音カタカナ→(半)濁音カタカナ→清音ひらがな→…の順に文字盤を変更する
(8)	読み上げボタン	フィールドに出力された文字列を全て読み上げる
(9)	消去ボタン	フィールドに出力された文字列を全て消去する
(10)	50音ボタン	選択されると，読み上げられた後，フィールドに出力される
(11)	一文字消しボタン	フィールドに出力された文字列の最後の一文字を消去する．定型句も一文字ずつ消すことができる
(12)	速度変更ボタン（加速）	オートスキャンの速度を0.2〜2.0秒の間で変更できる
(13)	速度変更ボタン（減速）	オートスキャンの速度を0.2〜2.0秒の間で変更できる
(14)	速度フィールド	現在のスキャン速度が表示される
(15)	音量変更ボタン（-）	アプリの音量を0〜1.0の間で変更できる
(16)	音量変更ボタン（+）	アプリの音量を0〜1.0の間で変更できる
(17)	音量フィールド	現在のアプリの音量が表示される

 

2.2.3　パネルカスタマイズ画面
　本画面では，定型句の入れ替え等が可能となる．支援者向けの画面であるため，全てタップ操作のみ対応する．
 
図7．パネルカスタマイズ画面

表3．設定画面の各オブジェクトの仕様
No.	名称	機能
(1)	定型句ホイール	デフォルト18句+作成した定型句を選択する
(2)	定型句ボタン	プルダウンで選択した単語を配置したい場所を選択することで，その場所に選択した単語が登録される(未完成)
(3)	録音ボタン	録音画面へ遷移する
(4)	初期化ボタン	録音した音声ファイルを全て消去する(未完成)
(5)	戻るボタン	定型句VOCA画面へ遷移する

 
2.2.4　定型句追加画面
　本画面では，定型句の作成ができる．本画面も支援者向けの画面であるため，全てタップ操作のみ対応する．
2.2.4.1録音による定型句追加画面
　本画面では，録音による定型句追加予定していた．セグメントによって合成音声による定型句追加画面に切り替えることができる． 当時は機能の画面や、音声再生できたが定型句追加機能さらにファイルの保存機能がなかった．

 
図8．定型句追加画面（録音）

表4．定型句追加画面（録音）の各オブジェクトの仕様
No.	名称	機能
(1)	セグメント	定型句を録音で追加するか合成音声で追加するか選択する
(2)	入力フィールド	定型句の表示名としたい語句を入力する
(3)	録音開始ボタン	録音を開始する
(4)	録音停止ボタン	録音を停止する
(5)	録音再生ボタン	録音した音声ファイルを再生する
(6)	戻るボタン	設定画面へ遷移する

2.3　開発した機能
　今年度開発を行った機能について説明する． 
2.3.1　スキャン音・範囲機能
スキャン範囲
スキャン範囲設定では定型句のみを選択するオプションがある．ユーザーはスキャン中に特定の定型句の範囲を決めることによって子供などが設定までたどり着けずに済む．

スキャン音選択
スキャン中に再生される音声や効果音、または音声をオフにするオプションが提供されている．これにより、ユーザーは利用する場面に合わせてこれらの選択肢をカスタマイズし、情報の受け取り方を最適化できるようになった．
または最初のメイン画面に現れる定型句の読み上げ用音声を事前に準備していたのを合成音声に置き換えたことでアプリへの負担が大きく減少できた．

 
図9．iOS版導入用VOCAアプリのメイン画面


2.3.2    パネルカストマイズ
ユーザーは複数の定型句パネルを切り替えることが可能になった．これにより、ユーザーは異なる状況やコンテキストに応じて適切なセットの定型句を利用できる．たとえば、学校で使う決まり文句と、友達との会話に使うフレンドリーな表現を別々のパネルにまとめておくことができる．柔軟に切り替えることができるため、コミュニケーションがよりスムーズで効果的になる．この複数の定型句パネルは、ユーザーにとって使いやすさとパーソナライズされた体験を提供する．
 
図9．iOS版導入用VOCAアプリのパネル画面










2.3.3　定型句追加機能・録音
新たな機能として、ユーザーは自分の好きな語句に録音を追加して再生できるようになった．これにより、ユーザーは個人的な要求に合わせた独自の表現を作成できる．または前年度版では未完成だったデータの保存機能が開発されたためアプリを閉じても記録はそのまま保たれるのは特徴である.
 
図10．iOS版導入用VOCAアプリのカストマイズ画面・録音



2.3.4　定型句追加機能・合成音声
この定型句追加機能は、ユーザーが録音と同様の手順で、再生される音声を入力することで端末が代わりにその内容を合成音声で読み上げる機能である. これにより、ユーザーは自分の声で言葉を入力する手間を省きつつ、合成音声を通じてメッセージや情報を伝えることがでる． ここでは佐々木千穂氏の「ボタンの内容を分かりやすくしてほしい」と言った評価があったため、「読み上げようテキスト表示」ボタンを押すと以下のように文章が表示される.

 
図11．iOS版導入用VOCAアプリの合成音声画面
2.3.5　ログ記録・カレンダー
ユーザーの操作と選択の履歴をファイルとして記録するログ画面が導入された．カレンダーの中から日付を選択し、その日のデータ記録が見える．さらに開発者の手助けとして過去の全データをファイル式でシェアすることが可能．カレンダー機能は佐々木千穂氏の評価により開発されたものである．
 
図12．iOS版導入用VOCAアプリのログ画面
2.4　画面遷移
以下にiOS版導入用VOCAアプリの画面遷移図を示す．
 
図13．iOS版導入用VOCAアプリの画面遷移図
第3章　評価
   共同研究者である佐々木千穂氏（熊本保健科学大学）にTestFlightを通してアプリを送り、試用評価してもらった．
　全体的には「使い易い」ということで好評価だったが以下の要望を得た．
・ログ画面にカレンダーを追加する
・スキャンボタンの改善
・カストマイズ画面がわかりにくいので、現在のデータを表示してほしい
これらについては対応済みである．

第4章　おわりに
　終わりに、本研究では重度肢体不自由児・者向けの導入用VOCAアプリのiOS版の開発を進めた．これにより、重度肢体不自由な方々がより自由にコミュニケーションを取る手段を提供することができると期待している．開発されたアプリには、定型句のカスタマイズや録音・合成音声の機能など、多くの新機能が追加された．これにより、利用者がより個別に適したコミュニケーション手段を獲得できるようになった．今後の展望としては、より多くのiPad/iPhone利用者にアプリを提供するための普及活動や、アプリの利用状況やフィードバックを基にした改善作業が挙げられる．また、新たな技術や機能を導入して、さらなる利便性や使いやすさの向上を図っていきたいと考えている．
謝辞
最後に、本研究を支えてくださったKyasuSoftの安原啓悦氏、アプリのテストと評価をしてくださった熊本保健大学の佐々木千穂氏に感謝の意を表する．今後も重度肢体不自由な方々の生活の質向上に貢献できるよう、努力を続けたいと思う．
参考文献 
[1]菅原瑞貴，「重度肢体不自由児・者のための導入用VOCAアプリの開発」，令和2年度 仙台高等専門学校 卒業研究論文，(2021)．
[2]佐々木千穂，菅原瑞貴，竹島久志，「導入用VOCAソフトを試用したALS患者に対するコミュニケーション支援の有用性についての検討―２事例への試用を通じて―」，第９回日本難病医療ネットワーク学会学術集会 C-5 (2021.11)．オンデマンド発表
[3]佐々木千穂，菅原瑞貴，竹島久志，「意志伝達装置の導入促進のための簡易型VOCAソフトの開発」，第22回日本言語聴覚学会，O(B)08-5 (2021.6)．
[4]菊地駿穀，「重度肢体不自由児・者のためのiOS版導入用VOCAアプリの開発」，令和3年度，仙台高等専門学校 卒業研究論文，（2022）．
	高橋大，「重度肢体不自由児・者のためのiOS版導入用VOCAアプリの開発」，令和4年度，仙台高等専門学校 卒業研究論文，（2023）．

